# 移除MapContainer的mapReady事件优化方案

## 问题分析

分析了MapContainer组件的mapReady事件使用情况，发现：

1. **事件使用情况**：
   - MapContainer组件在initMap中触发mapReady事件，传递mapManager实例
   - DataAnalyse.vue组件监听@map-ready事件，保存mapManager实例

2. **冗余原因**：
   - 现在使用了MapManager单例模式
   - DataAnalyse.vue可以直接通过MapManager.getInstance()获取实例
   - 不需要通过事件传递mapManager实例

## 优化方案

1. **移除MapContainer.vue中的事件处理**：
   - 移除 `emit('mapReady', mapManager)` 事件触发
   - 移除对应的 `emit` 定义
   - 保持initMap方法的基本功能

2. **修改DataAnalyse.vue的实例获取方式**：
   - 移除 `@map-ready` 事件监听
   - 移除 `handleMapReady` 方法
   - 直接通过MapManager.getInstance()获取实例

3. **保持功能完整性**：
   - 确保DataAnalyse.vue中的所有地图操作功能正常
   - 保持与MapManager单例模式的一致性

## 技术实现要点

1. **代码清理**：
   - 移除所有未使用的事件处理逻辑
   - 简化组件间的通信结构

2. **功能保持**：
   - 确保所有地图操作功能正常工作
   - 保持MapManager单例模式的通信方式

3. **向后兼容性**：
   - 确保修改不会影响其他功能
   - 保持必要的API接口

## 预期效果

- 代码更加简洁，移除了冗余的事件处理逻辑
- 组件间通信更加直接，通过MapManager单例模式
- 减少了事件传递的复杂性
- 提高了代码的可读性和维护性

## 实现步骤

1. 修改MapContainer.vue，移除mapReady事件触发
2. 修改DataAnalyse.vue，直接通过MapManager.getInstance()获取实例
3. 运行诊断工具，确保代码没有错误
4. 测试功能是否正常工作
