# 适应 mapManager 简化后的组件修改计划

## 1. 分析当前状况

### 1.1 mapManager.ts 修改情况

用户已经简化了 mapManager.ts 文件，删除了以下方法：
- `addBaseMap` - 添加底图图层
- `addOverlayLayer` - 添加叠加图层
- `removeLayer` - 移除图层
- `getLayer` - 获取图层
- `addChinaProvinceLayer` - 添加中国省界图层
- `addDrawControl` - 添加绘制控件
- `addFullscreenControl` - 添加全屏控件
- `addLayerControl` - 添加图层控制
- `loadGeoData` - 加载地理数据
- `getGeoData` - 获取地理数据
- `clearAllLayers` - 清除所有图层

保留的方法：
- `fitBounds` - 调整地图视图以适应图层
- `setView` - 设置地图中心点和缩放级别
- `destroy` - 销毁地图实例

### 1.2 组件使用情况

#### DataAnalyse/MapContainer.vue
- 使用了已删除的 `addBaseMap` 方法
- 需要修改为直接使用 mapManager.map 的原生方法

#### ImgGet/MapComponent.vue
- 使用了已删除的 `removeLayer`, `addOverlayLayer`, `clearAllLayers`, `addChinaProvinceLayer` 方法
- 需要修改为直接使用 mapManager.map 的原生方法
- `resetMap` 方法中使用了 `setView` 方法，需要检查调用方式

## 2. 修改计划

### 2.1 修改 DataAnalyse/MapContainer.vue

- 移除对 `addBaseMap` 方法的调用
- 直接使用 `mapManager.map.addLayer` 方法添加底图
- 确保地图实例正确初始化和传递

### 2.2 修改 ImgGet/MapComponent.vue

- 移除对已删除方法的调用
- 直接使用 `mapManager.map` 的原生方法进行图层管理
- 修改 `handleRegionSelected` 方法，使用原生方法添加和移除图层
- 修改 `clearSelectedRegionLayers` 方法，使用原生方法清除图层
- 修改 `resetMap` 方法，使用原生方法重置地图

### 2.3 检查 DataAnalyse.vue

- 检查是否使用了已删除的方法
- 如果使用了，修改为使用原生方法

## 3. 技术实现要点

- 直接使用 Leaflet 地图实例的原生方法进行图层管理
- 保持组件的功能完整性
- 确保代码风格一致
- 测试修改后的组件是否正常工作

## 4. 预期结果

- 所有组件能够正常使用简化后的 mapManager
- 功能完整，没有引入新的错误
- 代码更加简洁，符合用户的设计意图
