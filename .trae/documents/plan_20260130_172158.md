# MapManager状态管理优化方案

## 问题分析

当前的MapManager结构存在以下问题：

1. **属性命名不清晰**：
   - `regionLayers` - 名称不够直观，建议改为`selectedRegion`
   - `layers` - 未充分发挥作用，可考虑删除

2. **数据结构不完善**：
   - `regionLayers`只存储图层，不存储区域信息
   - 建议同时存储区域信息和图层

3. **状态管理功能不足**：
   - MapManager应该提供更完善的状态管理功能
   - 子组件应该能够直接通过MapManager获取和修改状态

## 优化方案

### 方案1：扩展MapManager，优化状态管理

1. **修改MapManager.ts**：

   * 将`regionLayers`改名为`selectedRegion`
   * 修改数据结构为：`"region_name": { info: {}, layer: layer }`
   * 删除未使用的`layers`属性
   * 提供获取和修改`selectedRegion`的方法

2. **修改相关组件**：

   * 更新使用`regionLayers`的地方为`selectedRegion`
   * 调整获取和修改状态的方式

## 技术实现要点

1. **属性重命名和结构调整**：
   - 将`regionLayers`改名为`selectedRegion`
   - 修改数据结构以同时存储信息和图层
   - 删除未使用的`layers`属性

2. **方法更新**：
   - 更新`handleRegionSelected`方法，使用新的数据结构
   - 更新`clearRegionLayers`方法，改为`clearSelectedRegion`
   - 添加获取和修改`selectedRegion`的方法

3. **组件适配**：
   - 更新SearchSection.vue，使用新的MapManager方法
   - 更新AddedDataList.vue，使用新的MapManager方法
   - 更新MapComponent.vue，使用新的MapManager方法

## 预期效果

- MapManager提供更完善的状态管理功能
- 子组件可以直接通过MapManager获取和修改状态
- 数据结构更加清晰，同时存储区域信息和图层
- 删除未使用的属性，简化代码结构

## 实现步骤

1. 修改MapManager.ts，重命名属性和调整数据结构
2. 更新相关方法，使用新的数据结构
3. 修改子组件，适配新的MapManager API
4. 测试功能是否正常工作
