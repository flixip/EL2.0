# DataAnalyse组件冗余代码删除方案

## 问题分析

当前的DataAnalyse组件结构使用了provide/inject机制在父组件和子组件之间共享数据：

1. **DataAnalyse.vue** - 父组件，使用provide提供addedGeoData和layers
2. **SearchSection.vue** - 子组件，使用inject接收数据
3. **AddedDataList.vue** - 子组件，使用inject接收数据

我们已经修改了MapManager，添加了selectedRegion属性来存储区域信息和图层。现在可以进一步优化，让子组件直接从MapManager获取数据，而不是从父组件inject，从而删除冗余代码。

## 优化方案

### 方案1：移除provide/inject机制，直接从MapManager获取数据

1. **修改MapManager.ts**：

   * 添加获取selectedRegion的方法
   * 提供获取和修改选中区域的API

2. **修改SearchSection.vue**：

   * 移除inject，直接从MapManager获取数据
   * 使用MapManager的方法添加和管理地理数据

3. **修改AddedDataList.vue**：

   * 移除inject，直接从MapManager获取数据
   * 使用MapManager的方法删除地理数据

4. **修改DataAnalyse.vue**：

   * 移除provide，不再需要提供数据给子组件
   * 简化代码结构

## 技术实现要点

1. **MapManager扩展**：
   - 添加获取selectedRegion的方法
   - 提供清晰的API接口

2. **组件修改**：
   - 移除provide/inject机制
   - 直接从MapManager获取和修改数据
   - 简化代码结构

3. **功能保持**：
   - 确保所有功能正常工作
   - 保持与之前相同的用户体验

## 预期效果

- 代码更加简洁，移除了冗余的provide/inject机制
- 子组件直接从MapManager获取和修改数据
- 减少了组件间的依赖关系
- 提高了代码的可维护性

## 实现步骤

1. 修改MapManager.ts，添加获取selectedRegion的方法
2. 修改SearchSection.vue，直接从MapManager获取数据
3. 修改AddedDataList.vue，直接从MapManager获取数据
4. 修改DataAnalyse.vue，移除provide机制
5. 运行诊断工具，确保代码没有错误
