# 完善 Step1 地图交互功能

## 1. 分析当前实现

- 地图组件在 `MapComponent.vue` 中实现，使用 Leaflet 创建地图实例
- Step1 组件使用 Element Plus 级联选择器实现行政区划选择
- 当前缺少地图与 Step1 组件之间的交互逻辑

## 2. 实现步骤

### 2.1 修改 Step1.vue 组件

- 在 `handleNext` 方法中添加地图操作逻辑
- 当用户选择区域并点击下一步时，通过事件传递选中的区域信息
- 确保能够获取到完整的区域选择数据（省份和城市）

### 2.2 修改 FormComponent.vue 组件

- 添加事件监听，接收 Step1 传递的区域选择信息
- 将区域选择信息传递给地图组件

### 2.3 修改 MapComponent.vue 组件

- 添加方法来处理图层的显示/隐藏
- 实现添加选中区域图层的功能
- 实现视角调整，聚焦到选中的图层
- 提供 API 接口供其他组件调用

### 2.4 实现图层管理逻辑

- 关闭地图上的整体中国省界区划
- 添加选中区域的图层
- 调整地图视角，聚焦到选中的图层
- 确保图层操作的正确性和性能

## 3. 技术实现要点

- 使用事件总线或 props/emit 进行组件间通信
- 利用 Leaflet 的图层管理 API 进行图层操作
- 使用 Leaflet 的 `fitBounds` 方法调整地图视角
- 确保异步操作的正确性和错误处理
- 优化地图性能，避免不必要的图层操作

## 4. 测试和验证

- 测试不同区域选择的情况
- 验证地图视角调整的正确性
- 确保图层操作的一致性
- 测试错误处理和边界情况