# 重新设计地图管理器 MapManager

## 1. 分析当前实现的问题

* **过于复杂**：使用了单例模式和多层方法调用，增加了代码复杂度

* **过度设计**：支持多地图实例管理，但实际只需要管理单个地图实例

* **方法过多**：暴露了太多方法，使用起来不够直观

## 2. 重新设计思路

### 2.1 核心设计原则

* **简洁明了**：直接接收 container id 作为构造函数参数，在类内部生成 map 实例

* **内部管理**：所有地图操作都在类内部完成，避免外部复杂调用

* **组件集成**：在地图组件中初始化实例并导出，其他组件直接引入使用

* **功能完整**：保留必要的地图操作功能，但简化实现方式

### 2.2 实现步骤

#### 2.2.1 重新设计 MapManager 类

* **构造函数**：接收 container id、center、zoom 等参数

* **内部属性**：map 实例、图层存储、地理数据存储

* **核心方法**：

  * 地图初始化

  * 图层管理（添加/移除/获取）

  * 地理数据管理

  * 地图控件添加

  * 视图控制

#### 2.2.2 修改 DataAnalyse/MapContainer.vue

* 在组件中初始化 MapManager 实例

* 导出实例供其他组件使用

* 简化组件代码，使用 MapManager 实例进行操作

#### 2.2.3 修改 DataAnalyse.vue

* 引入 MapManager 实例

* 使用实例进行地理数据管理和图层操作

* 简化代码结构

#### 2.2.4 修改 ImgGet/MapComponent.vue

* 在组件中初始化 MapManager 实例

* 导出实例供其他组件使用

* 简化组件代码，使用 MapManager 实例进行操作

### 2.3 技术实现要点

* 使用类的实例方法而非静态方法

* 直接在类内部管理 map 实例

* 提供简洁的 API 接口

* 保持功能的完整性

* 确保代码的可读性和可维护性

## 3. 预期结果

* MapManager 实现更加简洁明了

* 组件代码更加简洁，易于理解和维护

* 地图操作更加直观，不需要复杂的方法调用

* 功能完整，满足现有的需求

